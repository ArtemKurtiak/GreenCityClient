<div class="w-100">
  <p class="add-location-title">{{ 'ubs-tariffs-add-location-pop-up.deactivate' | translate }}</p>
</div>
<app-dialog-tariff [row]="form" [newDate]="newDate" [name]="name" [edit]="true"></app-dialog-tariff>
<ng-template #form>
  <form [formGroup]="CardForm">
    <div class="d-flex">
      <!-- Курʼєр -->
      <div class="form-wrapper">
        <div>
          <div class="d-flex first-row">
            <div class="form-group">
              <label>{{ 'ubs-tariffs.courier' | translate }}</label>
              <input
                formControlName="courier"
                class="form-control"
                placeholder="{{ 'ubs-tariffs.placeholder-choose-courier' | translate }}"
                [matAutocomplete]="autoCourier"
                #autocompleteTriggerCourier="matAutocompleteTrigger"
              />
              <mat-autocomplete #autoCourier="matAutocomplete" (optionSelected)="selectCourier($event)">
                <mat-option *ngFor="let option of filteredCouriers" class="option-state" [value]="option">
                  <span class="checkbox-text">{{ option }}</span>
                </mat-option>
              </mat-autocomplete>

              <img
                [src]="icons.arrowDown"
                class="arrowDown-img"
                alt="arrowDown"
                (click)="openAuto($event, autocompleteTriggerCourier, false)"
              />
            </div>
          </div>
        </div>
      </div>
      <!-- Станція -->
      <div>
        <div [ngClass]="selectedStations.length ? 'd-flex' : 'd-flex first-row'">
          <div class="form-group">
            <label>{{ 'ubs-tariffs.station' | translate }}</label>
            <input
              formControlName="station"
              class="form-control"
              [placeholder]="stationPlaceholder"
              [matAutocomplete]="autoStation"
              #autocompleteTriggerStation="matAutocompleteTrigger"
            />
            <mat-autocomplete #autoStation="matAutocomplete" (optionSelected)="selectStation($event, autocompleteTriggerStation)">
              <mat-option *ngFor="let option of filteredStations" class="option-state" [value]="option">
                <mat-checkbox class="mr-1" [checked]="checkStation(option)"></mat-checkbox>
                <span class="checkbox-text">{{ option }}</span>
              </mat-option>
            </mat-autocomplete>

            <img
              [src]="icons.arrowDown"
              class="arrowDown-img"
              alt="arrowDown"
              (click)="openAuto($event, autocompleteTriggerStation, false)"
            />
          </div>
        </div>
        <div [ngClass]="selectedStations.length ? 'list' : 'dis-none'" class="list">
          <div *ngFor="let item of selectedStations; let index = index" class="d-flex selected-element">
            <div class="itemList">{{ item.name }}</div>
            <img [src]="icons.cross" class="delete-button-img" alt="delete-icon" (click)="deleteStation(index)" />
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex">
      <!-- Область -->
      <div class="form-wrapper">
        <div [ngClass]="selectedRegions.length ? 'd-flex' : 'd-flex first-row'">
          <div class="form-group">
            <label>{{ 'ubs-tariffs.region' | translate }}</label>
            <input
              #autocompleteTriggerRegion="matAutocompleteTrigger"
              formControlName="region"
              [placeholder]="regionPlaceholder"
              [matAutocomplete]="autoRegion"
              class="form-control"
            />
            <mat-autocomplete #autoRegion="matAutocomplete" (optionSelected)="selectRegion($event, autocompleteTriggerRegion)">
              <mat-option *ngFor="let item of filteredRegions" [value]="item">
                <mat-checkbox class="mr-1" [checked]="checkRegion(item)"> </mat-checkbox>
                <span class="checkbox-text">{{ item }}</span>
              </mat-option>
            </mat-autocomplete>
            <img
              [src]="icons.arrowDown"
              class="arrowDown-img"
              alt="arrowDown"
              (click)="openAuto($event, autocompleteTriggerRegion, false)"
            />
          </div>
        </div>
        <div class="list">
          <div *ngFor="let item of selectedRegions; let index = index" class="d-flex selected-element">
            <div class="itemList">{{ item.name }}</div>
            <img [src]="icons.cross" class="delete-button-img" alt="delete-icon" (click)="deleteRegion(index)" />
          </div>
        </div>
      </div>
      <!-- Місто -->
      <div>
        <div [ngClass]="selectedCities.length ? 'd-flex' : 'd-flex first-row'">
          <div class="form-group">
            <label>{{ 'ubs-tariffs.city' | translate }}</label>
            <input
              #autocompleteTriggerCity="matAutocompleteTrigger"
              formControlName="city"
              [placeholder]="cityPlaceholder"
              [matAutocomplete]="autoCity"
              [attr.disabled]="CardForm.controls['region'].dirty ? null : true"
              class="form-control"
            />
            <mat-autocomplete #autoCity="matAutocomplete" (optionSelected)="selectCity($event, autocompleteTriggerCity)">
              <mat-option *ngFor="let item of filteredCities" [value]="item">
                <mat-checkbox class="mr-1" [checked]="checkCity(item)"> </mat-checkbox>
                <span class="checkbox-text">{{ item }}</span>
              </mat-option>
            </mat-autocomplete>
            <img
              [src]="icons.arrowDown"
              class="arrowDown-img"
              alt="arrowDown"
              (click)="openAuto($event, autocompleteTriggerCity, city.disabled)"
            />
          </div>
        </div>
        <div class="list">
          <div *ngFor="let item of selectedCities; let index = index" class="d-flex selected-element">
            <div class="itemList">{{ item.name }}</div>
            <img [src]="icons.cross" class="delete-button-img" alt="delete-icon" (click)="deleteCity(index)" />
          </div>
        </div>
      </div>
    </div>
  </form>
  <div class="buttons-wrapper">
    <div class="d-flex buttons" mat-dialog-actions>
      <button class="secondary-global-button btn m-0 mr-2" mat-button (click)="onNoClick()">
        {{ 'ubs-tariffs-add-location-pop-up.cancel_button' | translate }}
      </button>
      <button class="primary-global-button btn m-0" [disabled]="!checkFields()" (click)="deactivateCard()">
        {{ 'ubs-tariffs-add-location-pop-up.deactivate' | translate }}
      </button>
    </div>
  </div>
</ng-template>
