<app-spinner *ngIf="isPosting"></app-spinner>
<div *ngIf="event && !isPosting" class="event">
  <div class="event-nav">
    <div class="back-button">
      <a [routerLink]="['/events']" class="button-link">
        <div class="button-content">
          <img [src]="images.arrowLeft" aria-hidden="true" alt="" class="button-arrow-img arrow" />
          <div class="button-text">Back to Events</div>
        </div>
      </a>
    </div>
    <div *ngIf="true || checkUserId() || isAdmin" class="edit-buttons">
      <div class="secondary-global-button event-button delete-button">
        <span (click)="deleteEvent()">Delete</span>
      </div>
      <div class="secondary-global-button event-button">
        <span (click)="routeToEditEvent()">Edit</span>
      </div>
    </div>
  </div>

  <div class="event-header">
    <div class="event-title">
      <h1>{{ event.title }}</h1>
    </div>
    <div class="event-meta">
      <div class="left-side">
        <div class="date-author">
          <div>Jan 30, 2020</div>
          <div>|</div>
          <div>by {{ event.organizer.name }}</div>
        </div>
        <div class="event-rating">
          <rating [(ngModel)]="rate" [customTemplate]="star" [max]="max" [readonly]="isReadonly"> </rating>
          <ng-template #star let-index="index" let-value="value">
            <span class="star {{ index < value ? 'fill' : 'empty' }}"></span>
          </ng-template>
        </div>
      </div>
      <div class="right-side">
        <div class="share-buttons">
          <svg width="22" height="22" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.91797 16.2739C7.91797 16.6881 8.25375 17.0239 8.66797 17.0239C9.08218 17.0239 9.41797 16.6881 9.41797 16.2739L9.41797 9.41726L16.2746 9.41726C16.6888 9.41726 17.0246 9.08148 17.0246 8.66726C17.0246 8.25305 16.6888 7.91726 16.2746 7.91726L9.41797 7.91726L9.41797 1.06066C9.41797 0.646447 9.08218 0.310661 8.66797 0.31066C8.25376 0.31066 7.91797 0.646447 7.91797 1.06066L7.91797 7.91726L1.06137 7.91726C0.647153 7.91726 0.311367 8.25305 0.311366 8.66726C0.311367 9.08148 0.647153 9.41726 1.06137 9.41726L7.91797 9.41726L7.91797 16.2739Z"
              fill="#64727D"
            />
          </svg>
          <svg width="24" height="24" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M7.81828 19.0105C16.3093 19.0105 20.9527 11.976 20.9527 5.87612C20.9527 5.67633 20.9485 5.47737 20.9396 5.2795C21.8409 4.62784 22.6242 3.81464 23.2423 2.88902C22.4152 3.25682 21.5249 3.50408 20.5913 3.61595C21.5443 3.04423 22.2761 2.14021 22.6212 1.06255C21.7293 1.59134 20.7414 1.97551 19.6899 2.18301C18.8476 1.28573 17.6481 0.724609 16.3202 0.724609C13.771 0.724609 11.7036 2.79188 11.7036 5.34018C11.7036 5.70261 11.7442 6.05486 11.8233 6.3928C7.9867 6.19975 4.58446 4.36296 2.30791 1.56973C1.91163 2.2518 1.68294 3.04437 1.68294 3.89004C1.68294 5.4914 2.49793 6.90549 3.73714 7.73245C2.9798 7.7092 2.26842 7.50129 1.64648 7.15523C1.64579 7.17463 1.64579 7.19348 1.64579 7.21412C1.64579 9.44981 3.23697 11.3165 5.34951 11.7394C4.96148 11.845 4.55323 11.9018 4.13218 11.9018C3.83524 11.9018 3.54574 11.8726 3.26449 11.8186C3.85217 13.6527 5.55645 14.9874 7.57694 15.0248C5.9969 16.2632 4.00655 17.0009 1.84338 17.0009C1.47132 17.0009 1.10352 16.9796 0.742188 16.9369C2.78524 18.2464 5.21122 19.0106 7.81842 19.0106"
              fill="#64727D"
            />
          </svg>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M22.2691 0H1.7309C0.774902 0 0 0.774902 0 1.7309V22.2691C0 23.2251 0.774902 24 1.7309 24H22.2691C23.2251 24 24 23.2251 24 22.2691V1.7309C24 0.774902 23.2251 0 22.2691 0V0ZM8.51294 18.1406H5.59039V9.34808H8.51294V18.1406ZM7.05176 8.14746H7.03271C6.052 8.14746 5.41772 7.47235 5.41772 6.6286C5.41772 5.76581 6.07141 5.10938 7.07117 5.10938C8.07092 5.10938 8.68616 5.76581 8.7052 6.6286C8.7052 7.47235 8.07092 8.14746 7.05176 8.14746ZM19.051 18.1406H16.1288V13.4368C16.1288 12.2547 15.7057 11.4485 14.6483 11.4485C13.8409 11.4485 13.3601 11.9923 13.1488 12.5173C13.0715 12.7051 13.0527 12.9677 13.0527 13.2305V18.1406H10.1303C10.1303 18.1406 10.1686 10.173 10.1303 9.34808H13.0527V10.593C13.441 9.9939 14.1359 9.14172 15.6865 9.14172C17.6093 9.14172 19.051 10.3984 19.051 13.099V18.1406Z"
              fill="#64727D"
            />
          </svg>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M22.2691 0H1.7309C0.774902 0 0 0.774902 0 1.7309V22.2691C0 23.2251 0.774902 24 1.7309 24H12.8203V14.7188H9.70312V11.0859H12.8203V8.41241C12.8203 5.31207 14.7131 3.62457 17.4787 3.62457C18.8033 3.62457 19.9417 3.72327 20.2734 3.7674V7.00781H18.3664C16.8616 7.00781 16.5703 7.72284 16.5703 8.77222V11.0859H20.168L19.6992 14.7188H16.5703V24H22.2691C23.2251 24 24 23.2251 24 22.2691V1.7309C24 0.774902 23.2251 0 22.2691 0V0Z"
              fill="#64727D"
            />
          </svg>
        </div>
      </div>
    </div>
  </div>

  <div class="event-main">
    <div class="main-left">
      <div *ngIf="imagesSlider.length" class="main-image">
        <img
          *ngFor="let image of imagesSlider; let i = index"
          [src]="image"
          [ngClass]="{ 'image-active': sliderIndex === i }"
          class="img fade"
          alt="event"
        />

        <div class="dot-container">
          <span
            *ngFor="let dot of imagesSlider; let i = index"
            class="dot"
            [ngClass]="{ 'dot-active': sliderIndex === i }"
            (click)="selectImage(i)"
          >
          </span>
        </div>

        <div class="button-arrow right">
          <span class="arrow-right" (click)="moveRight()">></span>
        </div>
        <div class="button-arrow left">
          <span class="arrow-left" (click)="moveLeft()"> < </span>
        </div>
      </div>

      <div class="event-date-place" *ngFor="let date of event.dates; let i = index">
        <div class="top-row">
          <div class="event-rating">
            <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8.48326 14.5819C8.80106 14.3901 9.19894 14.3901 9.51674 14.5819L13.151 16.7754C13.9083 17.2325 14.8425 16.5535 14.6416 15.692L13.6771 11.5578C13.5928 11.1963 13.7156 10.8178 13.9962 10.5748L17.2086 7.79189C17.8772 7.21268 17.5198 6.11442 16.6384 6.03964L12.4109 5.68098C12.0413 5.64962 11.7194 5.41629 11.5747 5.07479L9.92072 1.17237C9.57613 0.359343 8.42387 0.359341 8.07928 1.17237L6.42532 5.07479C6.28058 5.41628 5.95871 5.64962 5.58914 5.68098L1.36163 6.03964C0.480203 6.11442 0.122797 7.21268 0.791395 7.79188L4.00379 10.5748C4.28436 10.8178 4.40721 11.1963 4.32287 11.5578L3.35841 15.692C3.15745 16.5535 4.09168 17.2325 4.849 16.7754L8.48326 14.5819Z"
                fill="#13AA57"
              />
            </svg>
            <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M9.7751 14.1538C9.29842 13.8661 8.70158 13.8661 8.2249 14.1538L4.59063 16.3473C4.21197 16.5758 3.74486 16.2364 3.84534 15.8056L4.8098 11.6714C4.9363 11.1292 4.75203 10.5615 4.33118 10.1969L1.11878 7.41397C0.78448 7.12437 0.963186 6.57524 1.4039 6.53785L5.6314 6.17919C6.18577 6.13215 6.66857 5.78215 6.88568 5.2699L8.53964 1.36748C8.71193 0.960971 9.28807 0.96097 9.46036 1.36749L11.1143 5.2699C11.3314 5.78215 11.8142 6.13215 12.3686 6.17919L16.5961 6.53785C17.0368 6.57524 17.2155 7.12437 16.8812 7.41397L13.6688 10.1969C13.248 10.5615 13.0637 11.1291 13.1902 11.6714L14.1547 15.8056C14.2551 16.2364 13.788 16.5758 13.4094 16.3473L9.7751 14.1538Z"
                stroke="#13AA57"
              />
            </svg>
            <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M9.7751 14.1538C9.29842 13.8661 8.70158 13.8661 8.2249 14.1538L4.59063 16.3473C4.21197 16.5758 3.74486 16.2364 3.84534 15.8056L4.8098 11.6714C4.9363 11.1292 4.75203 10.5615 4.33118 10.1969L1.11878 7.41397C0.78448 7.12437 0.963186 6.57524 1.4039 6.53785L5.6314 6.17919C6.18577 6.13215 6.66857 5.78215 6.88568 5.2699L8.53964 1.36748C8.71193 0.960971 9.28807 0.96097 9.46036 1.36749L11.1143 5.2699C11.3314 5.78215 11.8142 6.13215 12.3686 6.17919L16.5961 6.53785C17.0368 6.57524 17.2155 7.12437 16.8812 7.41397L13.6688 10.1969C13.248 10.5615 13.0637 11.1291 13.1902 11.6714L14.1547 15.8056C14.2551 16.2364 13.788 16.5758 13.4094 16.3473L9.7751 14.1538Z"
                stroke="#13AA57"
              />
            </svg>
          </div>
          <div class="participants">
            <div class="participants-count">(10)</div>
            <div class="participants-avatars">
              <div class="avatar">
                <div style="background: rgb(200, 100, 100); width: 1920px; height: 1080px"></div>
              </div>
              <div class="avatar">
                <div style="background: rgb(100, 200, 100); width: 1920px; height: 1080px"></div>
              </div>
              <div class="avatar">
                <div style="background: rgb(100, 100, 200); width: 1920px; height: 1080px"></div>
              </div>
              <div class="avatar">
                <div style="background: rgb(150, 130, 180); width: 1920px; height: 1080px"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="bottom-row">
          <div class="info-row">
            <div class="label">Start</div>
            <div class="info">
              {{ date.startDate | date: 'mediumDate' }}
              {{ date.startDate | date: 'HH:mm:ss' }}&nbsp;-&nbsp;{{ date.finishDate | date: 'HH:mm:ss' }}
            </div>
          </div>

          <div *ngIf="date.coordinates?.latitude" class="info-row">
            <div class="label">Place</div>
            <div class="info">
              {{ date.coordinates.addressEn }}
              <span (click)="openMap(date)" class="map-icon"></span>
            </div>
          </div>

          <div *ngIf="date.onlineLink" class="info-row">
            <div class="label">Online</div>
            <div class="info">
              {{ date.onlineLink }}
            </div>
          </div>
        </div>
      </div>

      <div class="event-tags-status">
        <div class="info-row">
          <div class="label">Initiative type</div>
          <div class="info">
            <div class="tags" aria-label="Initiative type">
              <div class="tag" [ngClass]="{ 'tag-active': tag.isActive }" *ngFor="let tag of tags">{{ tag.nameEn }}</div>
            </div>
          </div>
        </div>

        <div class="info-row">
          <div class="label">Status</div>
          <div class="info">
            <div class="tags" aria-label="Initiative type">
              <div class="tag" [ngClass]="{ 'global-tag-clicked': event.open }">Open</div>
              <div class="tag" [ngClass]="{ 'global-tag-clicked': !event.open }">Closed</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-right">
      <h3>Description</h3>
      <div [innerHTML]="event.description"></div>
    </div>
  </div>
</div>
