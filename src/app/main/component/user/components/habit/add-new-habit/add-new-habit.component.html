<div class="wrapper">
  <div class="back-to-my-habits" (click)="onGoBack()">
    <div class="arrow"></div>
    <div class="text">{{ 'user.habit.btn.back-to-habit' | translate }}</div>
  </div>
  <div class="habit-container" *ngIf="habitResponse">
    <div class="habit-info">
      <div class="header">
        <div class="item">
          <span *ngFor="let tag of tags; let last = last">
            {{ tag }}
            <ng-container *ngIf="!last">,&nbsp;</ng-container>
          </span>
        </div>
        <div class="line"></div>
        <div class="item">{{ 'user.habit.header.aсquired' | translate }} {{ habitResponse.amountAcquiredUsers }}</div>
        <div class="line"></div>
        <div class="item">
          <div>{{ 'user.habit.header.difficulty' | translate }}</div>
          <div class="stars">
            <img *ngFor="let star of stars" alt="star" [src]="star" />
          </div>
        </div>
      </div>
      <div class="habit-title">
        {{ habitResponse?.habitTranslation.name }}
      </div>
      <div class="description">
        <p>
          {{ habitResponse?.habitTranslation.description }}
        </p>
      </div>
    </div>
    <div class="habit-img">
      <img class="img" [src]="habitResponse?.image" onerror="this.src='assets/img/habits/man.svg'" alt="habit picture" />
    </div>
  </div>
  <div class="habit-edit">
    <h3>{{ 'user.habit.info' | translate }}</h3>
    <div class="lock-icon"></div>
  </div>
  <div class="divider"></div>
  <div class="container-habit-edit">
    <div class="habit-progress">
      <app-habit-progress [habit]="assignedHabit" (progressValue)="getProgressValue($event)"></app-habit-progress>
    </div>
    <div class="habit-info-right-block">
      <div class="duration-shoping">
        <div class="duration" *ngIf="habitResponse">
          <app-habit-duration [habitDurationInitial]="initialDuration" (changeDuration)="getDuration($event)"></app-habit-duration>
        </div>
        <div class="shopping">
          <app-habit-edit-shopping-list
            (newList)="getList($event)"
            [shopList]="initialShoppingList"
            [isAcquired]="isAcquired"
            [isEditing]="isEditing"
          ></app-habit-edit-shopping-list>
        </div>
      </div>
      <div class="invite-friends">
        <app-habit-invite-friends></app-habit-invite-friends>
      </div>
    </div>
    <div *ngIf="!isEditing" class="add-habit-container">
      <button class="tertiary-global-button btn" type="button" (click)="goToProfile()">{{ 'user.habit.btn.cancel' | translate }}</button>
      <button class="primary-global-button btn" type="button" (click)="addHabit()">
        {{ 'user.habit.btn.add' | translate }}
      </button>
    </div>
    <div *ngIf="isEditing && !isAcquired" class="add-habit-container">
      <button class="tertiary-global-button btn" (click)="giveUpHabit()">
        {{ 'user.habit.btn.give-up' | translate }}
      </button>
      <button *ngIf="canAcquire" class="secondary-global-button btn" type="button" (click)="setHabitStatus()">
        {{ 'user.habit.btn.acquire' | translate }}
      </button>
      <button class="primary-global-button btn" type="button" (click)="updateHabit()">
        {{ 'user.habit.btn.save' | translate }}
      </button>
    </div>
  </div>
  <app-habits-widget *ngIf="tags" [tag]="tags[0]" [isHabit]="true"></app-habits-widget>
  <app-habits-widget [isHabit]="false"></app-habits-widget>
</div>
